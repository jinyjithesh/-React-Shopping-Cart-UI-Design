var SvCtrlV2;(function(n){function t(n,t){for(var r=n&&n.length||0,i=0;i<r;i++)t(n[i])}function r(n,t){try{return n&&n.length&&n.indexOf(t)>-1}catch(i){return!1}}function u(n){try{return JSON.parse(n)}catch(t){return null}}function i(n,t){if(n)for(var i in n)t(i,n[i])}function f(n,t){var r=n;return i(t,function(n,t){r[n]=t}),r}function e(i){if(i&&i.target){var r=i.target.getBoundingClientRect(),u=r.x,f=r.right,e=r.y,o=r.bottom,s=n.elementsFromPoint((u+f)/2,(e+o)/2);t(s,function(n){n.tagName==="A"&&n.hasAttribute("h")&&_w.si_T&&_w.si_T(n.getAttribute("h"))})}}n.iterateThroughList=t;n.hasNonNegativeIndex=r;n.parseJsonString=u;n.iterateOverObject=i;n.objectAssign=f;n.fireOverlapping=e})(SvCtrlV2||(SvCtrlV2={})),function(n){function t(n,t){try{var i=_d.elementsFromPoint(n,t)||[];return Array.prototype.slice.call(i)}catch(r){return[]}}n.elementsFromPoint=t}(SvCtrlV2||(SvCtrlV2={})),function(n){function i(n){return n&&n.tagName==="A"}function t(n,t,i){n&&t&&i&&n.addEventListener(t,i)}function r(n,i){t(n,"keydown",function(n){n.keyCode==13&&i(n)})}function o(n,u,f,e){if(f===void 0&&(f=!0),e===void 0&&(e=!0),n&&u){var o=i(n)?u:function(n){e&&(sj_pd(n),n.stopImmediatePropagation());u(n)};t(n,"click",o);f&&r(n,o)}}function s(n,t){n&&t&&u(n,f,t)}function h(n,t){n&&t&&u(n,e,t)}function u(i,r,u){i&&u&&n.iterateThroughList(r,function(n){t(i,n,u)})}var f=["mouseenter","focusin"],e=["mouseleave","focusout"];n.isAnchorElement=i;n.addListenerToElement=t;n.addEnterKeyListener=r;n.addClickListener=o;n.addInListeners=s;n.addOutListeners=h}(SvCtrlV2||(SvCtrlV2={})),function(n){function r(n,i){if(n){var r=n[t];return r&&r.contains(i)}}function i(n,i,r){n&&n[t]&&n[t][r](i)}function u(n,t){i(n,t,"add")}function f(n,t){i(n,t,"remove")}var t="classList";n.elementHasClass=r;n.addElementClass=u;n.removeElementClass=f}(SvCtrlV2||(SvCtrlV2={})),function(n){function i(n,t){return t===void 0&&(t=!0),function(i,r){if(!r)return"";var u=n?n[r]:"";return t&&u.length&&(u=encodeURIComponent(u)),u}}function r(t,r){if(t&&r)return n.urlParamsTemplate.replace(/\{(\d)\}/g,i([t,r]))}function u(t){if(n.itemSchema||(n.itemSchema={}),t&&t.length>0){var i=t.split(":"),r=i[0],u=i[1];n.itemSchema[r]=u}}function f(t){var i;if(!t)return null;if(i=t.dataset,i){var r=i.svptnk,u=i.svptnerinfo,f=i.svitminfp,e=i.svcptid,o=i.ufmc,s=i.sfmc,h=i.svstb,c=i.svmdcmp,l=i.svloc,a=i.svattr,v=n.parseJsonString(u)||{};return n.objectAssign(n.parseJsonString(f)||{},{PredefinedType:v,Key:r,ComponentId:e,UnsavedFormCode:o,SavedFormCode:s,SavedLinkSameTab:!!h,MetaLocInfo:{MetadataLocationId:l,MetadataLocationAttr:a,MetaLocCompName:c}})}}function t(){if(n.singlePartner){var f=n.singlePartner.Mapping,e=n.singlePartner.SavedFormCode,o=n.singlePartner.SavedLinkSameTab,t=n.singlePartner.PredefinedType,s=t.Title,h=t.CollectionTagPath,c=t.CollectionId,i=t.PredefinedCollectionType,l=t.ItemType,a=t.APIItemType,v=n.singlePartner.Key,y=n.singlePartner.SourceAttr,p=n.singlePartner.ItemTagPath,w=n.singlePartner.AttachToElementSelector,b=n.singlePartner.AttachDelay,k=n.singlePartner.ComponentId;f&&n.iterateThroughList(f.split(","),u);l&&(n.defaultItemType=l);v&&(n.partnerKey=v);i&&(n.defaultCollectionType=i);s&&(n.defaultCollectionName=s);c?n.defaultCollectionId=c:n.defaultCollectionType&&(n.defaultCollectionId=Constants.PredefinedCollections[i]);h&&(n.defaultCollectionTagPath=h);p&&(n.itemTagPath=p);k&&(n.compName=k);y&&(n.sourceAttribute=y);a&&(n.apiItemType=a);w&&(n.attachElementSelector=w,b&&(n.attachDelay=b));e&&(n.savedFormCode=e);o&&(n.savedLinkSameTab=o);n.apiItemType&&n.compName&&(n.urlParams=r(n.apiItemType,n.compName))}}function e(i,r){var u=i&&i.getAttribute("data-svcptid"),e;u&&!n.componentMap[u]&&(e=f(i),n.componentMap[u]=e,n.partnerCount++,n.partnerCount===1&&(n.singlePartner=e,t()));r&&r(i)}n.componentMap={};n.partnerCount=0;n.urlParamsTemplate="type={0}&Comp={1}";n.initSinglePartnerInfo=t;n.registerPartnerAndComponent=e}(SvCtrlV2||(SvCtrlV2={})),function(n){function c(n){ti=n}function l(){return ti}function lt(t){n.removeElementClass(n.currentHoveredElement,ft);n.currentElementMid=null;n.currentElementCollId&&(sj_evt.fire("onCurrentCollIdUnset",n.currentElementCollId),n.currentElementCollId=null);t?d(t):(n.currentHoveredElement=null,n.currentElementTurl=null,n.currentElementMetadata=null)}function hu(r){var u,f,e;if(y)for(u in n.localSavedItemsMap)if(f=n.localSavedItemsMap[u],f.rawItem&&(e=f.rawItem,typeof t.cg!==i&&t.cg(r,e)))return u;return null}function d(t,i,r,f){var c,l,o,a,v;i===void 0&&(i=n.sourceAttribute);r===void 0&&(r=n.urlParams);f===void 0&&(f=n.compName);n.addElementClass(t,ft);n.currentHoveredElement=t;o=s(t,i)||s(t,e);o&&(n.currentElementMetadata=o,n.currentElementMid=h(o)||hu(o),n.currentElementTurl=o.turl,n.currentElementTurl||(a=(l=(c=o.ThumbnailInfo)===null||c===void 0?void 0:c[0])===null||l===void 0?void 0:l.Thumbnail,a&&(n.currentElementTurl=a)),v={},n.currentElementMid&&((n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[n.currentElementMid])?(n.currentElementCollId=n.localSavedItemsMap[n.currentElementMid].lastCollection,n.currentElementCollId&&sj_evt.fire("onCurrentCollIdSet",n.currentElementCollId),v=n.localSavedItemsMap[n.currentElementMid].collections,n.addElementClass(t,u),n.addElementClass(n.hoverContainerSub,u)):n.removeElementClass(n.hoverContainerSub,u),sj_evt.fire("onHoverElementSet",v)));n.currentUrlParams=r;n.currentCompName=f}function at(t){var i,r;return t?(i=n.defaultItemType in yi?yi[n.defaultItemType]:null,!i)?t:(r=n.defaultItemType+":"+i+"=",(t.indexOf(r)!==0?r:"")+t):null}function gi(n,t){return n?_qs("["+t+"]",n):null}function s(t,i){var r,u;return(i===void 0&&(i=n.sourceAttribute),!t)?null:(r=t.hasAttribute(i)?t:gi(t,i),!r)?null:(u=r.getAttribute(i),!u)?null:n.parseJsonString(u)}function a(t){var i=gi(n.containerElement,n.sourceAttribute+'*="'+t+'"');if(!i)return null;while(!f(i)&&i[ci])i=i[ci];return f(i)?i:null}function f(t){return t&&n.elementHasClass(t,ri)}function v(t,i,r,f,e,o){t&&i&&i in n.localSavedItemsMap&&(n.addElementClass(t,u),r&&yt(t,"Saved",o,i,f,e))}function vt(t,i,r,f,e){t&&i&&(i in n.localSavedItemsMap||(n.removeElementClass(t,u),r&&yt(t,"Unsaved",e||ct,i,f)))}function yt(t,i,r,u,f,e){t&&sj_evt.fire(i,t);var o={ColId:r,ItmId:u,CompName:n.currentCompName,ClkSrc:f};e!==null&&e!==undefined&&(o.IsNewCol=e?"1":"0");MMInstUtils.logEvent("CI.SaveClick","SaveControl",i,o,MMInstUtils.getInstKData(t))}function nr(t,i,r,u,f){var e,o;t&&(t in n.localSavedItemsMap?(u&&n.localSavedItemsMap[t].lastCollection||(n.localSavedItemsMap[t].lastCollection=r),n.localSavedItemsMap[t].collections[r]||(n.localSavedItemsMap[t].collections[r]=!0,n.localSavedItemsMap[t].numCollections++),u?n.localSavedItemsMap[t].collectionQueue.unshift(r):n.localSavedItemsMap[t].collectionQueue.push(r)):(o={cid:f?i:at(i),rawItem:f?f:null,collections:(e={},e[r]=!0,e),lastCollection:r,collectionQueue:[r],isDefault:!!!f&&n.localCollectionsMap[r]===n.defaultCollectionName,numCollections:1},n.localSavedItemsMap[t]=o))}function tr(t,i){if(t&&n.localSavedItemsMap[t])if(ct=i,n.localSavedItemsMap[t].numCollections===1)delete n.localSavedItemsMap[t],n.currentElementMid===t&&(n.currentElementCollId=null);else{delete n.localSavedItemsMap[t].collections[i];n.localSavedItemsMap[t].numCollections--;var r=n.localSavedItemsMap[t].collectionQueue.indexOf(i);r>-1&&(n.localSavedItemsMap[t].collectionQueue.splice(r,1),n.localSavedItemsMap[t].lastCollection=n.localSavedItemsMap[t].collectionQueue.slice(-1)[0],n.currentElementMid===t&&(n.currentElementCollId=n.localSavedItemsMap[t].lastCollection))}}function pt(t,i,r){t&&(n.addElementClass(t,r),n.removeElementClass(t,i))}function ir(n){n&&pt(n,b,ut)}function cu(n){n&&pt(n,ut,b)}function lu(n,t){n&&f(n)&&(ir(n),sj_evt.fire("onSaveControlError",t?1:2))}function wt(t){t&&n.removeElementClass(t,b)}function au(){if(n.currentElementTemp){var t=n.currentElementTemp;return n.currentElementTemp=null,t}}function rr(n){var t,i;return n.thumbnailUrl||((i=(t=n.thumbnails)===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.thumbnailUrl)}function ur(n){var e,t,r,i,u,f;if(n&&n.items){for(e=n.items,t=0,r=e;t<r.length;t++)if(i=r[t],i&&i.content){if(u=i.content,!u)continue;if(f=rr(u),f)return f}return null}}function fr(t,i,r,u){n.localCollectionsCidMap[t]||(n.localCollectionsCidMap[t]=[]);n.localCollectionsCidMap[t].indexOf(i)<=-1&&(u?n.localCollectionsCidMap[t].push(i):n.localCollectionsCidMap[t].unshift(i));n.cidToThumbnailUrlMap[i]||(n.cidToThumbnailUrlMap[i]=r)}function vu(t,i){var r,u;if(n.localCollectionsCidMap[t])return(u=n.localCollectionsCidMap[t].indexOf(i),u<=-1)?void 0:(n.localCollectionsCidMap[t].splice(u,1),((r=n.localCollectionsCidMap[t])===null||r===void 0?void 0:r[0])||null)}function yu(t,i){var r=n.parseJsonString(t.getAttribute(e)),u;return r?(u={url:r.ClickThroughUrl,customData:r.CustomData,domain:r.FriendlyDomainName,itemTagPath:r.ItemTagPath,title:r.Title,_type:"GenericItem"},{collectionItemId:i,content:u,itemtype:"Generic"}):null}function bt(t,i,r,u,e,o,s,h){var p=r.targetCollectionOperationStatus,c,w,b,nt,tt;if(!(p&&p[et]))return!1;try{var k=p,d=k.itemOperationStatuses,it=si,y=k[it];if(!(d&&y&&y.id))return!1;var rt=d,g=rt[0],ut=et,ft=g[ut],ot=hi,l=g.item[ot];return ft?(c=s in Constants.PredefinedCollections?s:y.id,n.latestCollId=c,s in Constants.PredefinedCollections&&(n.kctColls[s]=y.id),t||n.currentElementMid!==null||l===null||(w=l.substring(l.indexOf(":")+1),t=w,n.currentElementMid=w),!t&&n.currentElementMid&&(t=n.currentElementMid),b=u?l:at(l),fr(c,b,n.currentElementTurl,!1),n.localCollectionsMap[c]&&sj_evt.fire("onChangeCollThumbnail",c,n.currentElementTurl),nt=t?n.localSavedItemsMap[t]:!1,tt=u?yu(i,l):null,nr(t,b,c,!1,tt),i)?(v(i,t,!0,e,h,c),sj_evt.fire(ht,c,n.localCollectionsMap[c],t&&n.localSavedItemsMap[t].numCollections||1),f(i)||v(a(t),t,!1),er("onSaveAdd",r,t,i,!nt)):!1:void 0}catch(st){return!1}}function pu(t,i,r,u,e,o){var h,s;return(r&&r[et])?(tr(t,o),i)?(vt(i,t,!0,u,o),h=vu(o,e),sj_evt.fire("onChangeCollThumbnail",o,h?n.cidToThumbnailUrlMap[h]:null),s=!n.localSavedItemsMap[t],s&&!f(i)&&vt(a(t),t,!1),sj_evt.fire(ht,o,n.localCollectionsMap[o],s?0:n.localSavedItemsMap[t].numCollections),er("onSaveDel",r,t,i,s)):!1:!1}function er(t,i,r,f,e){if(f){if(wt(f),n.currentHoveredElement===f){n.removeElementClass(n.ctrl,ui);switch(t){case"onSaveAdd":n.addElementClass(n.hoverContainerSub,u);break;case"onSaveDel":e&&n.removeElementClass(n.hoverContainerSub,u)}wt(n.hoverContainerSub)}sj_evt.fire(t,i,r,f,e,typeof n.metaLocElement!="undefined"&&n.metaLocElement===f)}return ct=null,!0}function h(n){if(n){var t=n.mid,i=n.sid;return t||i}}function kt(t,i){return i===void 0&&(i=n.defaultItemType),!("mid"in t)&&i!=="recipe"}function or(u,f,o,c){var a,l,p;if(f===void 0&&(f=n.currentHoveredElement),c===void 0&&(c=n.sourceAttribute),a=f||n.currentHoveredElement,a){var w=u in Constants.PredefinedCollections,b=w?Constants.PredefinedCollections[u]:null,k=n.localCollectionsMap[u],v=function(t,i,r){return r===void 0&&(r=null),u&&(n.latestCollId=u),sj_evt.fire("onCurrentCollIdSet",u),bt(r,a,t,i,o,k,u,!1)},y=n.currentUrlParams;if(a.hasAttribute(e)&&typeof t.agai!==i)t.agai(y,n.parseJsonString(a.getAttribute(e)),u,function(t){return v(t,!0,n.currentElementMid)},function(){return r(!0)},n.compName);else{if(l=s(a,c),!l){r(!0);return}p=h(l);kt(l)&&typeof t.ag!==i?t.ag(y,l,n.itemSchema,n.itemTagPath,n.localCollectionsMap[u],n.partnerKey,function(n){return v(n,!0,p)},function(){return r(!0)}):w&&typeof t.ai!==i?t.ai(y,l,n.defaultItemType,n.itemSchema,b,function(n){return v(n,!1,p)},function(){return r(!0)}):typeof t.aic!==i&&t.aic(y,l,n.defaultItemType,n.itemSchema,u,function(n){return v(n,!1,p)},function(){return r(!0)})}}}function wu(u,f,o,c,l){var v=f||n.currentHoveredElement,y,p,a,w;if(v)if(y=function(t,i,r){var e,s,f;return(r===void 0&&(r=null),f=(s=(e=t.targetCollectionOperationStatus)===null||e===void 0?void 0:e.collection)===null||s===void 0?void 0:s.id,f)?(g(f,u),n.latestCollId=f,sj_evt.fire(st,!0,f,u,n.currentElementTurl,null,!0),o&&o(t),bt(r,v,t,i,"Flyt",u,f,!0)):!1},p=n.currentUrlParams,v.hasAttribute(e)&&typeof t.agnai!==i)t.agnai(p,n.parseJsonString(v.getAttribute(e)),u,function(n){return y(n,!0)},function(){return r(!0)},n.compName);else{if(a=s(v,l),w=function(){r(!0);c()},!a){w();return}kt(a)&&typeof t.ag!==i?t.ag(p,a,n.itemSchema,n.itemTagPath,u,n.partnerKey,function(n){return y(n,!0,h(a))},w):u&&typeof t.anc!==i&&t.anc(p,a,n.defaultItemType,n.itemSchema,u,function(n){return y(n,!1,h(a))},w)}}function sr(u,f,o){var l=o||n.currentHoveredElement,a,s,h,c;l&&(a=n.currentElementMid,s=n.localSavedItemsMap[a],s)&&(h=function(t){return n.latestCollId=u,sj_evt.fire("onCurrentCollIdUnset",u),pu(a,l,t,f,s.cid||null,u)},c=n.currentUrlParams,l.hasAttribute(e)&&typeof t.dgai!==i?t.dgai(c,s.cid,n.kctColls[u]||u,h,function(){return r(!0)}):kt(n.currentElementMetadata)&&typeof t.dg!==i?t.dg(c,n.currentElementMetadata,n.itemSchema,n.itemTagPath,u,n.partnerKey,h,r):u in Constants.PredefinedCollections&&typeof t.ddc!==i?t.ddc(c,Constants.PredefinedCollections[u],s.cid,n.defaultItemType,h,function(){return r(!1)}):typeof t.dic!==i&&t.dic(c,u,s.cid,n.defaultItemType,h,r))}function r(t){n.currentHoveredElement&&lu(n.currentHoveredElement,t)}function bu(){MMInstUtils.logEvent("CI.Saves","SaveControl","GetCollFailed");n.addElementClass(n.ctrl,ui)}function ku(n){MMInstUtils.logEvent("CI.Saves","SaveControl","GetCollections",{ColCount:n})}function du(n){if(!(n&&n.content&&n.itemType))return null;var t=n.content,i=n.itemType;switch(i){case"Image":return t.imageId;case"Video":return t.videoId;case"Generic":return t.contentId;default:return null}}function gu(t){if(!t)return null;var u=t&&t[hi],i=u?decodeURIComponent(u):"",r=du(t);return r||(r=/^[a-z]+:[a-z]+=/.test(i)?i.substring(i.indexOf("=")+1):i.replace("/"+n.partnerKey+"/:","")),{contentId:r,collectionItemId:i}}function g(t,i){n.localCollectionsMap[t]=i;n.localCollectionNames[i]=1}function nf(t){var i,e;if(t){var u=t.collectionPage,f=t.id,r=t.knownCollectionType;(r&&(n.kctColls[Constants.PredefinedCollections[r]]=f),i=!r?f:Constants.PredefinedCollections[r],n.latestCollId||(n.latestCollId=i),n.localCollectionsMap[i]||pf(t),u&&u.items)&&(e=u.items,n.iterateThroughList(e,function(t){var f;if(t){var e=gu(t),u=e.collectionItemId,r=e.contentId;r&&u&&(t.content&&fr(i,u,rr(t.content),!0),nr(r,u,i,!0,t),f=a(r),f)&&(v(f,r),sj_evt.fire(ht,i,n.localCollectionsMap[i],n.localSavedItemsMap[r].numCollections))}}))}}function tf(t){var i,u,r;if(!(t&&t.collections))return!1;if(i=t.collections,u=(i===null||i===void 0?void 0:i.length)||0,ku(u),n.iterateThroughList(i,nf),sj_evt.fire("onSaveGet",t),y||(y=!0,p&&(d(p),p=null)),(!!(n.ctrl===null||n.ctrl===void 0?void 0:n.ctrl.dataset.svkct)||n.standalone)&&n.singlePartner){var f=n.singlePartner.PredefinedType,s=f.Title,o=f.CollectionId,e=f.PredefinedCollectionType;e&&o&&!n.localCollectionsMap[o]&&(r=Constants.PredefinedCollections[e],n.localCollectionsMap[r]||(g(r,s),n.latestCollId||(n.latestCollId=r),sj_evt.fire(st,!1,r,n.defaultCollectionName,null,e),u++))}return!di&&n.singlePartner&&(sj_evt.fire(vi,n.singlePartner),di=!0),sj_evt.fire("onCollectionsGotten",u),!0}function rf(t,i){n.hoverContainer&&n.hoverContainer.style.setProperty(t,i)}function hr(t){n.hoverContainerSub&&n.removeElementClass(n.hoverContainerSub,t)}function cr(t){n.hoverContainer&&t&&n.iterateOverObject(t,rf)}function lr(t){n.hoverContainer&&cr({display:t})}function dt(t){var r=t||n.currentHoveredElement,i;if(n.hoverContainer&&r){if(c(!0),wf(),i=gt(r),!i){c(!1);return}var u=i.top,f=i.bottom,e=i.left,o=i.width,s=i.height,h=f>_w.innerHeight?_w.innerHeight-u:s;cr({width:o+k,height:h+k,top:u+ki+k,left:e+bi+k});c(!1)}}function ar(){n.hoverContainer&&lr("block")}function vr(){n.hoverContainer&&(lr("none"),sj_evt.fire("onHoverContainerHide"))}function uf(t){var i=n.currentHoveredElement;i&&n.hoverContainerSub&&(n.elementHasClass(i,t)?n.addElementClass(n.hoverContainerSub,t):hr(t))}function ff(){if(!l()){var t=pr(null);t&&(lt(t),n.hoverContainer&&(dt(),ar(),n.removeElementClass(n.hoverContainerSub,"b_scpers"),n.iterateThroughList(pi,uf)),sj_evt.fire("onControlAppended"))}}function ef(t,i,r,f){var e=f||n.currentHoveredElement,o;e&&(sj_evt.fire("onSaveInProgress",e),o=n.elementHasClass(e,u)||n.elementHasClass(n.hoverContainerSub,u),!o&&(n.localSavedItemsMap===null||n.localSavedItemsMap===void 0?void 0:n.localSavedItemsMap[n.currentElementMid])&&(o=!0),o?r&&sr(t,i):or(t,e,i))}function o(n,t){if(!(n&&t))return!1;try{return n.contains(t)}catch(i){return!1}}function gt(n){if(!n)return null;try{return n.getBoundingClientRect()}catch(t){return null}}function yr(t,i){var r;if(!(t&&i))return!1;try{if(r=gt(t),!r)return;var u=r.x,f=r.y,e=n.elementsFromPoint(u,f);return n.hasNonNegativeIndex(e,i)}catch(o){return!1}}function of(t){if(!l()){var i=t[ot];if(i&&n.hoverContainer){if(o(n.ctrl,i))return;yr(i,n.hoverContainer)||vr()}}}function pr(n){rt&&sb_ct(rt);var t=wi;return wi=n,n&&(rt=sb_st(ff,su*2)),t}function sf(t){var i,r;if(!l())if(i=t[li],n.currentFocusTarget=t.target,i&&f(i)){if(r=t[ot],n.hoverContainerSub&&r&&o(r,n.hoverContainerSub))return;pr(i);sj_evt.fire("onSaveFocus")}else sj_pd(t)}function hf(t){var i,r;if(!l()&&(i=t[ot],i)&&!o(n.ctrl,i)&&(r=t[li],f(r))&&!o(r,i)){if(t.type==="focusout"&&!o(r,i)&&!n.shiftKeyDown){n.nextFocusable=i;n.ctrlBtn.focus();sj_evt.fire("onSaveButtonFocus");return}if(n.hoverContainer){if(o(i,n.hoverContainer))return;vr()}n.iterateThroughList(pi,hr);n.iterateThroughList([ei,fi,oi,ft],function(t){n.removeElementClass(r,t)});n.currentHoveredElement===r&&(lt(),n.currentFocusTarget==null)}}function wr(t){t&&(n.addInListeners(t,sf),n.addOutListeners(t,hf),f(t)&&dr(t))}function nt(n,t,i){return(i===void 0&&(i=""),n&&n.children&&t)?n.querySelectorAll("."+t+i):[]}function br(n){return n?nt(n,ri):[]}function kr(t){t&&(f(t)?wr(t):n.iterateThroughList(br(t),wr))}function dr(n){if(n){var t=s(n);t&&v(n,h(t))}}function cf(t){var i=t.addedNodes,r=t.target;r&&n.iterateThroughList(br(r),dr);n.ctrl&&i&&i.length>0&&n.iterateThroughList(i,kr)}function lf(r){n.partnerCount===1&&(n.containerElement=r,typeof t.gc!==i&&t.gc(n.urlParams,tf,bu));it.observe(r,ii);n.ctrl&&kr(r)}function af(t){for(var i=t,u={scroll:1,overlay:1},r;i&&i.parentElement&&i!==_d.body;){if(i.hasAttribute(ai))break;r=_w.getComputedStyle(i);(r.overflow in u||r.overflowX in u||r.overflowY in u)&&(n.addListenerToElement(i,"scroll",vf),i.setAttribute(ai,"1"));i=i.parentElement}}function vf(n){sj_sp(n);var t=new MouseEvent("scroll",n);_w.dispatchEvent(t)}function gr(t){n.registerPartnerAndComponent(t,lf);af(t)}function nu(t){var r,i,u,f;if(t&&(n.elementHasClass(t,w)&&t.dataset.svcptid&&gr(t),r=t.children,r))for(i=0,u=r;i<u.length;i++)f=u[i],nu(f)}function yf(t){var i=t.addedNodes,u=t.attributeName,r=t.target;(i||u||r)&&(i&&n.iterateThroughList(i,nu),u&&r&&n.elementHasClass(r,"psvctrl")&&n.singlePartner&&sj_evt.fire(vi,n.singlePartner))}function ni(t){t&&n.iterateThroughList(t,gr)}function tu(t){return new MutationObserver(function(i){return n.iterateThroughList(i,t)})}function iu(n){var t=n[1],i=n[2],u,r;t&&i&&(u=i&&at(i),u)&&(r=a(t),r&&v(r,t,!1))}function ru(n){var t=n[1],r=n[2],i;t&&(i=a(t),tr(t,r),i&&vt(i,t,!1))}function pf(t,i){var f,r;i===void 0&&(i=!1);var h=t.id,e=t.title,o=t.collectionPage,s=t.knownCollectionType,u=s?Constants.PredefinedCollections[s]:h;!n.localCollectionsMap[u]&&e&&(g(u,e),r=null,o&&((f=o.items)===null||f===void 0?void 0:f.length)&&(r=ur(o),r&&sj_evt.fire("onChangeCollThumbnail",u,r)),sj_evt.fire(st,i,u,e,r,s||null))}function wf(){bi=_w.scrollX||_w.pageXOffset;ki=_w.scrollY||_w.pageYOffset}function uu(){sj_evt.unbind("onFavAdd",iu);sj_evt.unbind("onFavDel",ru);sj_evt.unbind("ajax.unload",uu);sj_evt.unbind("onPersButtonInteract",fu);_d.body.removeChild(n.hoverContainer);tt.disconnect();it.disconnect()}function fu(t){var i=t[1],r=t[2],u=t[3],f=t[4],e=t[5];d(r,u,f,e);dt(i);ar();n.addElementClass(n.hoverContainerSub,"b_scpers");sj_evt.fire("onControlAppended")}function bf(){n.ctrl=_ge("svctrl");n.ctrl&&(c(!1),n.addListenerToElement(n.ctrl,"mousedown",sj_sp));n.ctrlBtn=_ge("svctrlbtn");n.hoverContainer=_ge("svhvr");n.hoverContainerSub=_ge("svhvrsub");n.hoverContainer&&(_d.body.insertBefore(n.hoverContainer,_d.body.firstChild),n.iterateThroughList(eu,function(t){n.addListenerToElement(_w,t,function(){return dt()})}),n.addOutListeners(n.hoverContainer,of));n.localSavedItemsMap={};n.localCollectionsMap={};n.localCollectionsCidMap={};n.cidToThumbnailUrlMap={};n.localCollectionNames={};n.latestCollId=null;n.currentElementCollId=null;n.currentElementMid=null;n.partners=[];it=tu(cf);tt=tu(yf);tt.observe(_d.body,ii);var t=_ge("svflytc");t&&t.hasAttribute("data-svlne")&&(n.standalone=!!t.getAttribute("data-svlne"));n.standalone||ni(nt(_d.body,w));n.iterateOverObject(ou,sj_evt.bind);sj_evt.bind("onPersButtonInteract",fu);sj_evt.bind("ajax.unload",uu);sj_evt.bind("onCurrentElementSet",function(n){var t=n[1];ni(nt(_d.body,w));y?d(t):p=t},!0);_w.addEventListener("keydown",function(t){!n.shiftKeyDown&&t.shiftKey&&(n.shiftKeyDown=!0)});_w.addEventListener("keyup",function(t){!t.shiftKey&&n.shiftKeyDown&&(n.shiftKeyDown=!1)});sj_evt.bind("updateSaveState",function(){ni(nt(_d.body,w));sj_evt.fire("registerSaveButton")},!0)}var t=MySavesAPIUtils,ti,y=!1,p=null,tt,it,ii={childList:!0,subtree:!0,attributes:!0},rt;n.shiftKeyDown=!1;var ri="isv",u="saved",w="isvctrl",ut="err",b="ing",ui="b_geterr",fi="isvfoc",ei="b_isvhvr",oi="b_schvr",ft="b_isvcur",si="collection",hi=si+"ItemId",et="isSuccess",ci="parentElement",i="undefined",ot="relatedTarget",li="currentTarget",k="px",e="data-saves-generic-item",ai="data-scrbind",st="onCollRegister",vi="onPartnerRegister",ht="onUpdateHoverBox",yi={webdoc:"url",recipe:"sid",video:"mid",image:"cid",product:"cid"},pi=[u,fi,ei,b,ut,oi],eu=["scroll","resize"],ou={onFavAdd:iu,onFavDel:ru};n.containerElement=null;var ct,wi,su=0,bi=0,ki=0,di=!1;n.kctColls={};n.setKeepFlyoutActive=c;n.getKeepFlyoutActive=l;n.clearCurrentHoveredElement=lt;n.metadataFromElement=s;n.logButtonClick=yt;n.switchElementClass=pt;n.switchElementToErrorClass=ir;n.switchElementToInProgressClass=cu;n.removeInProgress=wt;n.clearTempCurrentElement=au;n.getThumbnailUrlFromCollectionPage=ur;n.handleAddStateChange=bt;n.getMetadataId=h;n.addToCollection=or;n.addToNewCollection=wu;n.removeFromCollection=sr;n.addCollectionName=g;n.handleSaveClick=ef;n.elementContains=o;n.getClientRect=gt;n.isElementInSpaceOfAnother=yr;bf()}(SvCtrlV2||(SvCtrlV2={})),function(n){function pi(t){if(i){t||(t=n.currentElementMid);var r=t&&n.localSavedItemsMap[t],u=r?r.lastCollection:n.latestCollId,f=u&&n.localCollectionsMap[u]||n.defaultCollectionName;ii(u,f,r?r.numCollections:0)}}function wi(t,i){if(t&&wt!==t){n.removeElementClass(wt,"b_sclbl");n.addElementClass(t,"b_sclbl");wt=t;n.removeElementClass(ei,ft);var r=t.querySelector(i?"onsvd":"onusvd");n.addElementClass(r,ft);ei=r}}function bi(t){sj_sp(t);var i=t.target.value.trim(),r=n.localCollectionNames[i];kt.setAttribute("aria-disabled",i&&!r?"false":"true");lt.setAttribute("aria-disabled",i&&!r?"false":"true");r?n.addElementClass(e,y):n.elementHasClass(e,y)&&n.removeElementClass(e,y)}function ki(t){var i,r=t[1];ii(r,n.localCollectionsMap[r],n.currentElementMid&&((i=n.localSavedItemsMap[n.currentElementMid])===null||i===void 0?void 0:i.numCollections))}function sr(t){var i=t[1];i==5?(n.removeElementClass(yt,ci),n.addElementClass(yt,hi)):bt&&(g.textContent=bt[i],n.removeElementClass(g,ci),n.addElementClass(g,hi));f(p)}function hr(t){var f=t[0],r=t[1],u=t[2],i=t[3];i===0?n.removeElementClass(n.hoverContainerSub,ot):n.addElementClass(n.hoverContainerSub,ot);ii(r,u,i)}function cr(){var s,c,y;n.ctrl&&(s=n.ctrl.dataset,s&&(c=s.dly,y=s.sfmc,c&&(it=parseInt(c,10)),n.savedFormCode||(n.savedFormCode=y)));l=_ge("svctrlnewbtn");a=_ge("svctrlinlineform");at=_ge("svctrlnewint");lt=_ge("svctrlinlineformcreate");v=_ge("svctrlhvr");t=_ge("svflytc");i=_ge("svctrllnk");fi=i.getAttribute("href");pt=_ge("svctrlhvrnum");p=_ge("svctrlerr");g=_ge("svctrlerrtxt");r=_ge("svctrlhvrbtn");vt=_ge("svctrllstw");nt=_ge("svctrlhvrpnl");yt=_ge("svctrlmsmtcherrtxt");tt=_ge("svctrlmsmtchlnk");w=_ge("svctrlhvrpnlbtn");kt=_ge("svctrlnewformcreate");rt=_ge("svctrlnewform");l&&(h=_ge("svctrlnewformname"),n.addClickListener(_ge("svctrlnewstart"),d),n.addClickListener(_ge("svctrlnewformback"),function(){return f(oi)}),n.addClickListener(l,d),n.addClickListener(kt,ht),h&&(n.addEnterKeyListener(h,ht),n.addListenerToElement(h,"keyup",bi)));a&&(u=_ge("svctrlinlineformname"),n.addClickListener(_ge("svctrlinlineformback"),ti),n.addClickListener(lt,ht),u&&(n.addEnterKeyListener(u,ht),n.addListenerToElement(u,"keyup",bi)));i&&n.isAnchorElement(i)&&n.addClickListener(i,fr);tt&&n.isAnchorElement(tt)&&n.addClickListener(tt,fr);t&&(n.standalone||n.addOutListeners(t,dr),t.hasAttribute("data-inline-crtcoll")&&(k=!!t.getAttribute("data-inline-crtcoll")),n.addInListeners(n.ctrlBtn,nu),n.addOutListeners(n.ctrlBtn,tu),v&&(k?(n.addClickListener(r,nr),n.addClickListener(_ge("svctrlhvrstart"),nr)):(n.addClickListener(r,d),n.addClickListener(_ge("svctrlhvrstart"),d))),n.addClickListener(_ge("svctrltri"),iu,!1),t.hasAttribute(vi)&&(bt=n.parseJsonString(t.getAttribute(vi))));e=k?_ge("svctrlinlineformerrdup"):_ge("svctrlnewformerrdup");sj_evt.bind("onControlAppended",ru);sj_evt.bind("onSaveInProgress",pr);sj_evt.bind("onSaveAdd",vr);sj_evt.bind("onSaveDel",yr);sj_evt.bind("onSaveFocus",wr);sj_evt.bind("onHoverContainerHide",ri);sj_evt.bind("onCurrentCollIdSet",ki);sj_evt.bind("onUpdateHoverBox",hr);sj_evt.bind("onSaveButtonClick",o);n.standalone||sj_evt.bind("onCollListExpand",rr);sj_evt.bind("onSaveControlError",sr);n.standalone&&(sj_evt.bind(li,ar),sj_evt.bind(ai,lr));sj_evt.bind("onSaveButtonFocus",br)}function lr(n){var t=n[0],i=n[1];t==ai&&er(null,null,i)}function d(){n.clearTempCurrentElement();h.value="";n.removeElementClass(e,y);f(rt);h.disabled=!1}function ar(t){var i=t[0],r=t[1];i==li&&s!==p&&(r>0?(ki([null,n.currentElementCollId||n.latestCollId]),f(v)):f(l),ur())}function di(t){var i;pi(t);o();tr((i=n.localSavedItemsMap[t])===null||i===void 0?void 0:i.numCollections)}function vr(t){var i=t[3];n.currentHoveredElement===i&&(di(n.currentElementMid),n.addElementClass(n.hoverContainerSub,ot))}function yr(t){var i=t[3],r=t[4];n.currentHoveredElement===i&&(di(n.currentElementMid),r&&n.removeElementClass(n.hoverContainerSub,ot))}function gi(){n.removeElementClass(p.querySelector("."+ft),ft)}function pr(t){var i=t[1],r=t[2];n.standalone||(gi(),n.currentHoveredElement===i&&wi(_ge("svctrlhvrpnling"),r))}function wr(){t&&!it&&o()}function br(){t&&o()}function ti(){r&&a&&(n.removeElementClass(nt,st),n.removeElementClass(vt,st),n.removeElementClass(a,c),n.addElementClass(r,c),n.setKeepFlyoutActive(!1),u.value="",u.disabled=!0,r.setAttribute("tabindex","0"),i.setAttribute("tabindex","0"),w&&w.setAttribute("tabindex","0"),n.collectionList&&n.collectionList.setAttribute("tabindex","0"),n.isCreateDialogShowing=!1)}function nr(){(n.clearTempCurrentElement(),r&&a)&&(n.addElementClass(nt,st),n.addElementClass(vt,st),n.addElementClass(a,c),n.removeElementClass(r,c),n.setKeepFlyoutActive(!0),u.value="",u.disabled=!1,u.focus(),n.removeElementClass(e,y),r.setAttribute("tabindex","-1"),i.setAttribute("tabindex","-1"),w&&w.setAttribute("tabindex","-1"),n.collectionList&&n.collectionList.setAttribute("tabindex","-1"),n.isCreateDialogShowing=!0)}function tr(n){if(pt&&n!==undefined&&n!==null){var t=n-1;pt.textContent=t>0?"+"+t:""}}function ii(t,r,u){(i.textContent=r,n.isAnchorElement(i))&&(i.setAttribute("href",fi+"&FORM="+n.savedFormCode+"&collId="+t),n.savedLinkSameTab&&i.hasAttribute(et)?i.removeAttribute(et):i.setAttribute(et,"_blank"),tr(u))}function ht(){var t;if(t=k?u.value:h.value,t=t.trim(),t){if(n.localCollectionNames[t]){n.addElementClass(e,y);return}n.currentElementTemp=n.currentHoveredElement;f(at);n.addToNewCollection(t,n.currentElementTemp,null,k?ti:d)}}function kr(t){n.nextFocusable.focus();n.nextFocusable=null;sj_pd(t)}function dr(i){if(!n.getKeepFlyoutActive()){var r=i.relatedTarget;if(i.type==="focusout"&&!n.elementContains(t,r)&&n.nextFocusable){kr(i);return}if(r){if(n.isElementInSpaceOfAnother(t,r))return;if(n.elementContains(n.ctrl,r))return;if(n.isElementInSpaceOfAnother(n.ctrl,r))return}ri();n.clearCurrentHoveredElement()}}function ir(){b&&(sb_ct(b),b=null)}function rr(){var r,i,o;if(t&&(n.removeElementClass(n.ctrl,dt),t.style.removeProperty("left"),t.style.removeProperty("right"),t.style.removeProperty("bottom"),n.removeElementClass(n.ctrl,gt),n.removeElementClass(n.ctrl,si),r=n.getClientRect(t),r)){var u=Math.min(n.getClientRect(_d.body).width,_w.innerWidth),s=r.width,f=r.right,e=r.left;if(e<0?f+s>u?(n.addElementClass(n.ctrl,dt),i=(f-u)/2,e+i<=0&&(i-=yi),t.style.right=i+"px"):n.addElementClass(n.ctrl,gt):f>u&&(e<s?(n.addElementClass(n.ctrl,dt),i=e/2,f-i>=u&&(i+=yi),t.style.left=-1*i+"px"):n.addElementClass(n.ctrl,gt)),o=Math.min(n.getClientRect(_d.body).height,_w.innerHeight)-r.bottom,o<t.clientHeight||o<nt.clientHeight+Math.min(3.5,Object.keys(n.localCollectionsMap).length)*48){n.addElementClass(n.ctrl,si);var h=n.ctrlBtn.clientLeft,l=n.ctrlBtn.clientWidth,c=t.clientLeft,a=t.clientWidth;h>=c&&h+l<=c+a&&(t.style.bottom=n.ctrlBtn.clientHeight+"px")}}}function gr(){n.latestCollId?(f(v),wi(_ge("svctrlhvrpnltxt"),!0)):f(l)}function ur(){t&&(n.addElementClass(n.ctrl,ut),gi(),n.standalone||rr(),ui&&n.standalone||(MMInstUtils.logEvent("CI.Hover","SaveControl","ShowFlyout",null,MMInstUtils.getInstKData(n.currentHoveredElement)),ui=!0),sj_evt.fire("onResetScroll"),ct=!0,ir())}function ri(){t&&(n.removeElementClass(n.ctrl,ut),f(),ir(),ct=!1)}function o(){gr();ct||ur()}function nu(i){i.relatedTarget&&(n.getKeepFlyoutActive()||(sj_pd(i),sj_sp(i),n.addElementClass(n.ctrl,ut),n.hoverContainerSub&&n.addElementClass(n.hoverContainerSub,"b_schvr"),sj_evt.fire("onSaveHover"),t&&(it&&!b?b=sb_st(o,it):o())))}function tu(t){if(t.type==="focusout"){if(n.shiftKeyDown){n.currentFocusTarget&&n.currentFocusTarget.focus();t.stopImmediatePropagation();sj_sp(t);sj_pd(t);return}o();s.focus();return}if(!n.getKeepFlyoutActive()){var i=t.relatedTarget;if(i){if(n.elementContains(n.ctrl,i))return;if(n.isElementInSpaceOfAnother(n.hoverContainer,i))return}n.clearCurrentHoveredElement();t.type==="mouseleave"&&(n.removeElementClass(n.ctrl,ut),ri())}}function iu(t){var i=n.elementsFromPoint(t.clientX,t.clientY);i&&i.length>1&&i[1].click()}function fr(t){var i=t[et];si_ct(i,!1,t);n.logButtonClick(n.currentHoveredElement,"LnkClk",n.currentElementCollId,n.currentElementMid,or);n.standalone&&(sj_evt.fire("onNewTabOpenRequest",i.getAttribute("href")),t.preventDefault());sj_sp(t)}function f(t){var f,i,u,e;if(s&&(n.removeElementClass(s,c),t===rt&&(oi=s),f=t==rt||t==at,n.setKeepFlyoutActive(f),n.getKeepFlyoutActive()?n.addElementClass(n.ctrl,"b_scnapd"):n.removeElementClass(n.ctrl,"b_scnapd")),!t){s=null;sj_evt.fire(ni,1);return}n.addElementClass(t,c);t==v&&(n.addElementClass(r,c),ti());s=t;i=null;switch(t){case v:u=_ge("svctrlpckr");u?(e=u.getAttribute("aria-expanded")==="false",i=e?3:4):i=3;break;case p:i=5;break;case l:i=3}sj_evt.fire(ni,i)}function ru(){i&&(n.currentElementMid&&pi(n.currentElementMid),sj_evt.fire(ni,2))}function er(t,i,r){o();var u=n.localSavedItemsMap[t||n.currentElementMid];u&&u.numCollections>1?sj_evt.fire("onBtnToggleCollList"):n.handleSaveClick(n.currentElementCollId||n.latestCollId,"Btn",r,i)}var ui=!1,ct=!1,s,l,r,a,u,lt,at,p,g,e,vt,nt,yt,tt,w,t,v,i,fi,pt,wt,ei,it=0,b,bt,rt,h,oi,k=!1,kt,dt="b_nrrwimg",gt="b_nrrwimgr",si="b_nrrwimgb",ut="b_flyt",c="b_scactive",ft="b_scslbl",y="b_scdisp",et="target",or="Flyt",ot="saved",st="scdactve",hi="errvsbl",ci="errinvsbl",ni="onVisualStateChanged",li="onCollectionsGotten",ai="onHostSavesControlClicked",vi="data-save-error-map",yi=5;n.isCreateDialogShowing=!1;n.onSaveControlClicked=er;cr()}(SvCtrlV2||(SvCtrlV2={})),function(n){function p(){l.scrollTop=0}function nt(t){var i=t.currentTarget,u=i.getAttribute(r),e=i.getAttribute(o),f=n.currentHoveredElement;if(u||e)sj_sp(t),sj_pd(t),t.stopImmediatePropagation();else return!0;i.hasAttribute(s)?n.removeFromCollection(u,v,f):n.addToCollection(u,f,v)}function w(n){var t=n;if(/\/th(\/.*|)\?/i.test(n)){var i=n.split("?"),r=i[0],u=i[1];t=r+"?"+u.replace(/&?\b[whrc]=\d+/gi,"")+d}return t}function tt(t){var f=t[1],u=t[2],i=_qs("["+r+'="'+f+'"] img',n.collectionList);i&&(u?i.src=w(u):i.removeAttribute("src"))}function u(t,i,r){r===void 0&&(r=!1);var u=r?function(n){t.insertBefore(n,t.firstChild)}:function(n){t.appendChild(n)};n.iterateThroughList(i,u)}function i(t,i){var r=function(n,i){i&&t.setAttribute(n,i)};n.iterateOverObject(i,r)}function f(n,t){return sj_ce(n,null,t)}function it(t){var e,p=t[1],b=t[2],k=t[3],y=t[4],d=t[5],g=t[6],l,s,a,v,h;n.collectionList&&(l=f("div","b_svcimg"),s=sj_ce("img"),i(s,{role:"presentation"}),sj_be(s,"error",function(){s.removeAttribute("src")}),y&&(s.src=w(y)),u(l,[s]),a=f("div","b_svclnk"),v=f("p","b_ignbt"),v.textContent=k,u(a,[v]),h=f("li","b_svcitm"),i(h,(e={},e[r]=b||null,e[o]=d||null,e.tabindex="-1",e.role="option",e["aria-selected"]="false",e)),g&&c(h),u(h,[l,a]),u(n.collectionList,[h],p),n.addClickListener(h,nt,!0,!1))}function h(r){var u,f;p();u=!1;r===null||r===undefined?(f=e.getAttribute("aria-expanded"),f!=="false"||a||(MMInstUtils.logEvent("CI.SaveClick","SaveControl","ColExp",null,MMInstUtils.getInstKData(n.currentHoveredElement)),a=!0),u=f==="true"?!1:!0):u=r;i(e,{"aria-expanded":u?"true":"false"});u?n.addElementClass(t,"xpnd"):n.removeElementClass(t,"xpnd");u&&sj_evt.fire(y);n.standalone&&sj_evt.fire(g,u?4:3)}function b(t){return n.defaultCollectionId&&n.defaultCollectionId===t?_qs("["+o+"]",n.collectionList):_qs("["+r+"='"+t+"']",n.collectionList)}function c(n){var t;i(n,(t={},t[s]="1",t["aria-selected"]="true",t))}function k(n){var t;n.removeAttribute(s);i(n,(t={},t["aria-selected"]="false",t))}function rt(n){var i=n[1],t=b(i);t&&c(t)}function ut(n){var i=n[1],t=b(i);t&&k(t)}function ft(t){var i=t[1];n.iterateThroughList(Array.prototype.slice.call(n.collectionList.childNodes),function(n){i&&n.getAttribute("data-svcid")in i?c(n):k(n)})}function et(t){var i;n.isCreateDialogShowing||(t.keyCode===38?(_d.activeElement.previousElementSibling&&_d.activeElement.previousElementSibling.focus(),sj_sp(t),sj_pd(t)):t.keyCode===40&&(_d.activeElement===n.collectionList?(i=_qs(".b_svcitm"))===null||i===void 0?void 0:i.focus():_d.activeElement.nextElementSibling&&_d.activeElement.nextElementSibling.focus(),sj_sp(t),sj_pd(t)))}function ot(){n.collectionList=_ge("svctrllst");e=_ge("svctrlpckr");l=_ge("svctrllstw");t=_ge("svctrlhvrpnlbtn");t&&n.addClickListener(t,function(){return h()});sj_evt.bind("onCollRegister",it,!0);sj_evt.bind("onCurrentCollIdSet",rt);sj_evt.bind("onCurrentCollIdUnset",ut);sj_evt.bind("onChangeCollThumbnail",tt);sj_evt.bind("onResetScroll",p);sj_evt.bind("onHoverElementSet",ft);sj_evt.bind("onBtnToggleCollList",function(){return h(!0)});sj_evt.bind("onControlAppended",function(){return h(!1)});sj_evt.bind("onSaveHover",function(){t||sj_evt.fire(y)});n.collectionList&&n.addListenerToElement(n.collectionList,"keydown",et)}var e,l,t,a=!1,v="ColLst",r="data-svcid",o="data-svkct",s="data-svd",d="&w=40&h=40&c=7&r=0",y="onCollListExpand",g="onVisualStateChanged";ot()}(SvCtrlV2||(SvCtrlV2={})),function(n){function v(t,i){if(t&&i)return n.urlParamsTemplate.replace(/\{(\d)\}/g,y([t,i]))}function y(n,t){return t===void 0&&(t=!0),function(i,r){if(r){var u=n&&n[r]||"";return t&&u.length&&(u=encodeURIComponent(u)),u}return""}}function p(n){var e=n.ComponentId,o=n.PredefinedType.APIItemType,u=n.MetaLocInfo;if(u){var s=u.MetadataLocationId,h=u.MetadataLocationAttr,l=u.MetaLocCompName;t=s;i=h;r=l;f=v(o,r||e);c()}}function s(){var t=n.getMetadataId(n.metadataFromElement(n.metaLocElement));t&&n.localSavedItemsMap[t]?n.addElementClass(n.metaLocElement,o):n.removeElementClass(n.metaLocElement,o)}function w(){return n.metaLocElement}function h(n){sj_evt.fire("onPersButtonInteract",n.target,w(),i,f,r);sj_evt.fire("onBtnToggleCollList")}function b(r){t&&(n.metaLocElement=_ge(t));n.addInListeners(r,h);n.metaLocElement&&(s(),e=new MutationObserver(s),e.observe(n.metaLocElement,{attributes:!0,attributeFilter:[i]}))}function c(){var t=_qs("."+a,_d.body);t&&(n.persBtn=t,b(n.persBtn))}function l(t){var r=t[0],i=t[2],f=t[4];f&&i===n.getMetadataId(n.metadataFromElement(n.metaLocElement))&&u&&(r==="onSaveAdd"&&n.localSavedItemsMap[i]||r==="onSaveDel"&&!n.localSavedItemsMap[i])&&u()}var a="psvctrl",t,i,r,f,u,e,o="saved";sj_evt.bind("onSaveRegButton",function(n){var t=n[1];u=t});sj_evt.bind("onPartnerRegister",function(n){var t=n[1];p(t)});sj_evt.bind("ajax.unload",function(){n.persBtn&&n.persBtn.removeEventListener("mouseenter",h)});sj_evt.bind("registerSaveButton",function(){c()},!0);sj_evt.bind("onSaveDel",l);sj_evt.bind("onSaveAdd",l)}(SvCtrlV2||(SvCtrlV2={})),function(n){function t(t){n.fireOverlapping(t);sj_sp(t);n.onSaveControlClicked(n.currentElementMid,n.currentHoveredElement,!0)}function i(){n.ctrlBtn&&n.addClickListener(n.ctrlBtn,t,!0)}i()}(SvCtrlV2||(SvCtrlV2={}))